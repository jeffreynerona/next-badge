{"version":3,"sources":["../../src/middleware/authMiddleware.js"],"names":["TOKENTIME","SECRET","authenticate","secret","generateAccessToken","req","res","next","console","log","user","id","token","sign","expiresIn","respond","status","json","success","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAMA,YAAY,OAAlB;AACA,IAAMC,SAAS,aAAf;;AAEA,IAAIC,eAAe,0BAAW,EAAEC,QAAQF,MAAV,EAAX,CAAnB;;AAEA,IAAIG,sBAAsB,SAAtBA,mBAAsB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC7CC,SAAQC,GAAR,CAAYJ,IAAIK,IAAJ,CAASC,EAArB;AACAN,KAAIK,IAAJ,GAAWL,IAAIK,IAAf;AACAL,KAAIO,KAAJ,GAAYP,IAAIO,KAAJ,IAAa,EAAzB;AACAP,KAAIO,KAAJ,GAAY,uBAAIC,IAAJ,CAAS;AACpBF,MAAIN,IAAIK,IAAJ,CAASC;AADO,EAAT,EAETV,MAFS,EAED;AACVa,aAAW;AADD,EAFC,CAAZ;AAKAP;AACA,CAVD;;AAYA,IAAIQ,UAAU,SAAVA,OAAU,CAACV,GAAD,EAAMC,GAAN,EAAc;AAC3BA,KAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACpBC,WAAS,IADW;AAEpBR,QAAML,IAAIK,IAFU;AAGpBE,SAAOP,IAAIO;AAHS,EAArB;AAKA,CAND;;AAQAO,OAAOC,OAAP,GAAiB;AAChBlB,2BADgB;AAEhBE,yCAFgB;AAGhBW;AAHgB,CAAjB","file":"authMiddleware.js","sourcesContent":["import jwt from 'jsonwebtoken';\nimport expressJwt from 'express-jwt';\n\nconst TOKENTIME = 2592000;\nconst SECRET = \"all 1z w3lL\";\n\nlet authenticate = expressJwt({ secret: SECRET });\n\nlet generateAccessToken = (req, res, next) => {\n\tconsole.log(req.user.id)\n\treq.user = req.user;\n\treq.token = req.token || {};\n\treq.token = jwt.sign({\n\t\tid: req.user.id,\n\t}, SECRET, {\n\t\texpiresIn: 604800\n\t});\n\tnext();\n}\n\nlet respond = (req, res) => {\n\tres.status(200).json({\n\t\tsuccess: true,\n\t\tuser: req.user,\n\t\ttoken: req.token\n\t});\n}\n\nmodule.exports = {\n\tauthenticate,\n\tgenerateAccessToken,\n\trespond\n}"]}