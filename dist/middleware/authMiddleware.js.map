{"version":3,"sources":["../../src/middleware/authMiddleware.js"],"names":["TOKENTIME","SECRET","authenticate","secret","generateAccessToken","req","res","next","console","log","user","id","coins","type","fullname","token","sign","expiresIn","respond","status","json","success","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAMA,YAAY,OAAlB;AACA,IAAMC,SAAS,aAAf;;AAEA,IAAIC,eAAe,0BAAW,EAAEC,QAAQF,MAAV,EAAX,CAAnB;;AAEA,IAAIG,sBAAsB,SAAtBA,mBAAsB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC7CC,SAAQC,GAAR,CAAYJ,IAAIK,IAAJ,CAASC,EAArB;AACAN,KAAIK,IAAJ,CAASC,EAAT,GAAcN,IAAIK,IAAJ,CAASC,EAAvB;AACAN,KAAIK,IAAJ,CAASE,KAAT,GAAiBP,IAAIK,IAAJ,CAASE,KAA1B;AACAP,KAAIK,IAAJ,CAASG,IAAT,GAAgBR,IAAIK,IAAJ,CAASG,IAAzB;AACAR,KAAIK,IAAJ,CAASI,QAAT,GAAoBT,IAAIK,IAAJ,CAASI,QAA7B;AACAT,KAAIU,KAAJ,GAAYV,IAAIU,KAAJ,IAAa,EAAzB;AACAV,KAAIU,KAAJ,GAAY,uBAAIC,IAAJ,CAAS;AACpBL,MAAIN,IAAIK,IAAJ,CAASC,EADO;AAEpBG,YAAUT,IAAIK,IAAJ,CAASI;AAFC,EAAT,EAGTb,MAHS,EAGD;AACVgB,aAAW;AADD,EAHC,CAAZ;AAMAV;AACA,CAdD;;AAgBA,IAAIW,UAAU,SAAVA,OAAU,CAACb,GAAD,EAAMC,GAAN,EAAc;AAC3BA,KAAIa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACpBC,WAAS,IADW;AAEpBX,QAAM;AACLC,OAAIN,IAAIK,IAAJ,CAASC,EADR;AAELC,UAAOP,IAAIK,IAAJ,CAASE,KAFX;AAGLC,SAAMR,IAAIK,IAAJ,CAASG,IAHV;AAILC,aAAUT,IAAIK,IAAJ,CAASI;AAJd,GAFc;AAQpBC,SAAOV,IAAIU;AARS,EAArB;AAUA,CAXD;;AAaAO,OAAOC,OAAP,GAAiB;AAChBrB,2BADgB;AAEhBE,yCAFgB;AAGhBc;AAHgB,CAAjB","file":"authMiddleware.js","sourcesContent":["import jwt from 'jsonwebtoken';\nimport expressJwt from 'express-jwt';\n\nconst TOKENTIME = 2592000;\nconst SECRET = \"all 1z w3lL\";\n\nlet authenticate = expressJwt({ secret: SECRET });\n\nlet generateAccessToken = (req, res, next) => {\n\tconsole.log(req.user.id)\n\treq.user.id = req.user.id;\n\treq.user.coins = req.user.coins;\n\treq.user.type = req.user.type;\n\treq.user.fullname = req.user.fullname;\n\treq.token = req.token || {};\n\treq.token = jwt.sign({\n\t\tid: req.user.id,\n\t\tfullname: req.user.fullname\n\t}, SECRET, {\n\t\texpiresIn: 604800\n\t});\n\tnext();\n}\n\nlet respond = (req, res) => {\n\tres.status(200).json({\n\t\tsuccess: true,\n\t\tuser: {\n\t\t\tid: req.user.id,\n\t\t\tcoins: req.user.coins,\n\t\t\ttype: req.user.type,\n\t\t\tfullname: req.user.fullname\n\t\t},\n\t\ttoken: req.token\n\t});\n}\n\nmodule.exports = {\n\tauthenticate,\n\tgenerateAccessToken,\n\trespond\n}"]}