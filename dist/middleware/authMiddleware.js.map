{"version":3,"sources":["../../src/middleware/authMiddleware.js"],"names":["TOKENTIME","SECRET","authenticate","secret","generateAccessToken","req","res","next","console","log","user","id","params","coins","type","fullname","token","sign","expiresIn","respond","status","json","success","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAMA,YAAY,OAAlB;AACA,IAAMC,SAAS,aAAf;;AAEA,IAAIC,eAAe,0BAAW,EAAEC,QAAQF,MAAV,EAAX,CAAnB;;AAEA,IAAIG,sBAAsB,SAAtBA,mBAAsB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC7CC,SAAQC,GAAR,CAAYJ,IAAIK,IAAJ,CAASC,EAArB;AACA,KAAGN,IAAIO,MAAJ,CAAWD,EAAd,EAAkB;AACjBN,MAAIO,MAAJ,CAAWD,EAAX,GAAgBN,IAAIO,MAAJ,CAAWD,EAA3B;AACA;AACDN,KAAIK,IAAJ,CAASC,EAAT,GAAcN,IAAIK,IAAJ,CAASC,EAAvB;AACAN,KAAIK,IAAJ,CAASG,KAAT,GAAiBR,IAAIK,IAAJ,CAASG,KAA1B;AACAR,KAAIK,IAAJ,CAASI,IAAT,GAAgBT,IAAIK,IAAJ,CAASI,IAAzB;AACAT,KAAIK,IAAJ,CAASK,QAAT,GAAoBV,IAAIK,IAAJ,CAASK,QAA7B;AACAV,KAAIW,KAAJ,GAAYX,IAAIW,KAAJ,IAAa,EAAzB;AACAX,KAAIW,KAAJ,GAAY,uBAAIC,IAAJ,CAAS;AACpBN,MAAIN,IAAIK,IAAJ,CAASC,EADO;AAEpBI,YAAUV,IAAIK,IAAJ,CAASK;AAFC,EAAT,EAGTd,MAHS,EAGD;AACViB,aAAW;AADD,EAHC,CAAZ;AAMAX;AACA,CAjBD;;AAmBA,IAAIY,UAAU,SAAVA,OAAU,CAACd,GAAD,EAAMC,GAAN,EAAc;AAC3BA,KAAIc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACpBC,WAAS,IADW;AAEpBZ,QAAM;AACLC,OAAIN,IAAIK,IAAJ,CAASC,EADR;AAELE,UAAOR,IAAIK,IAAJ,CAASG,KAFX;AAGLC,SAAMT,IAAIK,IAAJ,CAASI,IAHV;AAILC,aAAUV,IAAIK,IAAJ,CAASK;AAJd,GAFc;AAQpBC,SAAOX,IAAIW;AARS,EAArB;AAUA,CAXD;;AAaAO,OAAOC,OAAP,GAAiB;AAChBtB,2BADgB;AAEhBE,yCAFgB;AAGhBe;AAHgB,CAAjB","file":"authMiddleware.js","sourcesContent":["import jwt from 'jsonwebtoken';\nimport expressJwt from 'express-jwt';\n\nconst TOKENTIME = 2592000;\nconst SECRET = \"all 1z w3lL\";\n\nlet authenticate = expressJwt({ secret: SECRET });\n\nlet generateAccessToken = (req, res, next) => {\n\tconsole.log(req.user.id);\n\tif(req.params.id) {\n\t\treq.params.id = req.params.id;\n\t}\n\treq.user.id = req.user.id;\n\treq.user.coins = req.user.coins;\n\treq.user.type = req.user.type;\n\treq.user.fullname = req.user.fullname;\n\treq.token = req.token || {};\n\treq.token = jwt.sign({\n\t\tid: req.user.id,\n\t\tfullname: req.user.fullname\n\t}, SECRET, {\n\t\texpiresIn: 604800\n\t});\n\tnext();\n}\n\nlet respond = (req, res) => {\n\tres.status(200).json({\n\t\tsuccess: true,\n\t\tuser: {\n\t\t\tid: req.user.id,\n\t\t\tcoins: req.user.coins,\n\t\t\ttype: req.user.type,\n\t\t\tfullname: req.user.fullname\n\t\t},\n\t\ttoken: req.token\n\t});\n}\n\nmodule.exports = {\n\tauthenticate,\n\tgenerateAccessToken,\n\trespond\n}"]}